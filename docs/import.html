<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Lesson 5 Importing Data | eBird Best Practices Workshop</title>
  <meta name="description" content="Best practices for using eBird data to estimate species distributions" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Lesson 5 Importing Data | eBird Best Practices Workshop" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Best practices for using eBird data to estimate species distributions" />
  <meta name="github-repo" content="mstrimas/ebp-workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lesson 5 Importing Data | eBird Best Practices Workshop" />
  
  <meta name="twitter:description" content="Best practices for using eBird data to estimate species distributions" />
  

<meta name="author" content="Matthew Strimas-Mackey, Alison Johnston, Wesley M. Hochachka, Viviana Ruiz-Gutierrez, Orin J. Robinson, Eliot T. Miller, Tom Auer, Steve Kelling, Daniel Fink" />


<meta name="date" content="2020-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="filter.html"/>
<link rel="next" href="presabs.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">eBird Best Practices Workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#intro-data"><i class="fa fa-check"></i><b>1.1</b> Data</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#intro-format"><i class="fa fa-check"></i><b>1.2</b> Format</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#intro-setup"><i class="fa fa-check"></i><b>1.3</b> Setup</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#intro-tidyverse"><i class="fa fa-check"></i><b>1.4</b> Tidyverse</a></li>
</ul></li>
<li class="part"><span><b>I eBird Data</b></span></li>
<li class="chapter" data-level="2" data-path="ebird-intro.html"><a href="ebird-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="ebird-intro.html"><a href="ebird-intro.html#the-auk-workflow"><i class="fa fa-check"></i><b>2.1</b> The <code>auk</code> workflow</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="access.html"><a href="access.html"><i class="fa fa-check"></i><b>3</b> Data Access</a></li>
<li class="chapter" data-level="4" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>4</b> Filtering</a><ul>
<li class="chapter" data-level="4.1" data-path="filter.html"><a href="filter.html#filter-define"><i class="fa fa-check"></i><b>4.1</b> Defining filters</a><ul>
<li class="chapter" data-level="4.1.1" data-path="filter.html"><a href="filter.html#filter-define-complete"><i class="fa fa-check"></i><b>4.1.1</b> Complete checklists</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="filter.html"><a href="filter.html#filter-execute"><i class="fa fa-check"></i><b>4.2</b> Execute filters</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>5</b> Importing Data</a><ul>
<li class="chapter" data-level="5.1" data-path="import.html"><a href="import.html#import-group"><i class="fa fa-check"></i><b>5.1</b> Group checklists</a></li>
<li class="chapter" data-level="5.2" data-path="import.html"><a href="import.html#import-taxonomy"><i class="fa fa-check"></i><b>5.2</b> Taxonomy</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="presabs.html"><a href="presabs.html"><i class="fa fa-check"></i><b>6</b> Presence-absence Data</a><ul>
<li class="chapter" data-level="6.1" data-path="presabs.html"><a href="presabs.html#presabs-filter"><i class="fa fa-check"></i><b>6.1</b> Filtering</a></li>
<li class="chapter" data-level="6.2" data-path="presabs.html"><a href="presabs.html#presabs-zerofill"><i class="fa fa-check"></i><b>6.2</b> Zero-filling</a></li>
<li class="chapter" data-level="6.3" data-path="presabs.html"><a href="presabs.html#presabs-tidy"><i class="fa fa-check"></i><b>6.3</b> Tidying up</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="subsampling.html"><a href="subsampling.html"><i class="fa fa-check"></i><b>7</b> Spatiotemporal Subsampling</a><ul>
<li class="chapter" data-level="7.1" data-path="subsampling.html"><a href="subsampling.html#subsampling-toy"><i class="fa fa-check"></i><b>7.1</b> A toy example</a></li>
<li class="chapter" data-level="7.2" data-path="subsampling.html"><a href="subsampling.html#subsampling-ebird"><i class="fa fa-check"></i><b>7.2</b> Subsampling eBird data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>8</b> Applications</a><ul>
<li class="chapter" data-level="8.1" data-path="applications.html"><a href="applications.html#applications-trajectory"><i class="fa fa-check"></i><b>8.1</b> Frequency trajectories</a></li>
<li class="chapter" data-level="8.2" data-path="applications.html"><a href="applications.html#applications-maps"><i class="fa fa-check"></i><b>8.2</b> Maps</a></li>
</ul></li>
<li class="part"><span><b>II Distribution Modeling</b></span></li>
<li class="chapter" data-level="9" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>9</b> Introduction</a><ul>
<li class="chapter" data-level="9.1" data-path="model-intro.html"><a href="model-intro.html#model-intro-data"><i class="fa fa-check"></i><b>9.1</b> Example data</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="encounter.html"><a href="encounter.html"><i class="fa fa-check"></i><b>10</b> Encounter Rate</a><ul>
<li class="chapter" data-level="10.1" data-path="encounter.html"><a href="encounter.html#encounter-prep"><i class="fa fa-check"></i><b>10.1</b> Data preparation</a></li>
<li class="chapter" data-level="10.2" data-path="encounter.html"><a href="encounter.html#encounter-rf"><i class="fa fa-check"></i><b>10.2</b> Random forests</a><ul>
<li class="chapter" data-level="10.2.1" data-path="encounter.html"><a href="encounter.html#encounter-rf-assess"><i class="fa fa-check"></i><b>10.2.1</b> Model assessment</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="encounter.html"><a href="encounter.html#encounter-habitat"><i class="fa fa-check"></i><b>10.3</b> Habitat associations</a><ul>
<li class="chapter" data-level="10.3.1" data-path="encounter.html"><a href="encounter.html#encounter-habitat-pi"><i class="fa fa-check"></i><b>10.3.1</b> Predictor importance</a></li>
<li class="chapter" data-level="10.3.2" data-path="encounter.html"><a href="encounter.html#encounter-habitat-pd"><i class="fa fa-check"></i><b>10.3.2</b> Partial dependence</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="encounter.html"><a href="encounter.html#encounter-predict"><i class="fa fa-check"></i><b>10.4</b> Prediction</a></li>
<li class="chapter" data-level="10.5" data-path="encounter.html"><a href="encounter.html#encouter-exercises"><i class="fa fa-check"></i><b>10.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="occupancy.html"><a href="occupancy.html"><i class="fa fa-check"></i><b>11</b> Occupancy</a><ul>
<li class="chapter" data-level="11.1" data-path="occupancy.html"><a href="occupancy.html#occupancy-prep"><i class="fa fa-check"></i><b>11.1</b> Data preparation</a></li>
<li class="chapter" data-level="11.2" data-path="occupancy.html"><a href="occupancy.html#occupancy-model"><i class="fa fa-check"></i><b>11.2</b> Occupancy modeling</a><ul>
<li class="chapter" data-level="11.2.1" data-path="occupancy.html"><a href="occupancy.html#occupancy-model-assess"><i class="fa fa-check"></i><b>11.2.1</b> Assessment</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="occupancy.html"><a href="occupancy.html#occupancy-predict"><i class="fa fa-check"></i><b>11.3</b> Prediction</a></li>
<li class="chapter" data-level="11.4" data-path="occupancy.html"><a href="occupancy.html#occupancy-exercises"><i class="fa fa-check"></i><b>11.4</b> Exercises</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">eBird Best Practices Workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="import" class="section level1">
<h1><span class="header-section-number">Lesson 5</span> Importing Data</h1>
<p>In the <a href="filter.html#filter">previous lesson</a>, we extracted a subset of the EBD containing Yellow-rumped Warbler observations from Guatemala. The output file created by <code>auk_filter()</code> is a tab-separated text file and could be read into R using <code>read.delim()</code> or <code>readr::read_tsv()</code>; however, <code>auk</code> has a function specifically for reading the EBD. <code>read_ebd()</code> does the following:</p>
<ol style="list-style-type: decimal">
<li>Reads the data using <code>data.table::fread()</code>, which is much faster than <code>read.delim()</code>.</li>
<li>Sets the correct data types for the columns.</li>
<li>Cleans up the column names so they are all <code>snake_case</code>.</li>
<li>Automatically performs some post processing steps, which will be covered later in this lesson.</li>
</ol>
<p>Let’s read in the data!</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="import.html#cb17-1"></a><span class="kw">library</span>(auk)</span>
<span id="cb17-2"><a href="import.html#cb17-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb17-3"><a href="import.html#cb17-3"></a></span>
<span id="cb17-4"><a href="import.html#cb17-4"></a>ebd &lt;-<span class="st"> </span><span class="kw">read_ebd</span>(<span class="st">&quot;data/ebd_yerwar.txt&quot;</span>, <span class="dt">unique =</span> <span class="ot">FALSE</span>, <span class="dt">rollup =</span> <span class="ot">FALSE</span>)</span>
<span id="cb17-5"><a href="import.html#cb17-5"></a><span class="kw">glimpse</span>(ebd)</span>
<span id="cb17-6"><a href="import.html#cb17-6"></a><span class="co">#&gt; Observations: 160</span></span>
<span id="cb17-7"><a href="import.html#cb17-7"></a><span class="co">#&gt; Variables: 46</span></span>
<span id="cb17-8"><a href="import.html#cb17-8"></a><span class="co">#&gt; $ global_unique_identifier     &lt;chr&gt; &quot;URN:CornellLabOfOrnithology:EBIRD:OBS239833810&quot;, &quot;URN:CornellLabOfOrnithology:E…</span></span>
<span id="cb17-9"><a href="import.html#cb17-9"></a><span class="co">#&gt; $ last_edited_date             &lt;chr&gt; &quot;2018-09-09 12:59:27&quot;, &quot;2017-08-29 11:00:49&quot;, &quot;2014-04-03 23:33:43&quot;, &quot;2015-06-23…</span></span>
<span id="cb17-10"><a href="import.html#cb17-10"></a><span class="co">#&gt; $ taxonomic_order              &lt;dbl&gt; 32863, 32859, 32858, 32858, 32858, 32863, 32859, 32860, 32858, 32858, 32858, 328…</span></span>
<span id="cb17-11"><a href="import.html#cb17-11"></a><span class="co">#&gt; $ category                     &lt;chr&gt; &quot;issf&quot;, &quot;issf&quot;, &quot;species&quot;, &quot;species&quot;, &quot;species&quot;, &quot;issf&quot;, &quot;issf&quot;, &quot;issf&quot;, &quot;specie…</span></span>
<span id="cb17-12"><a href="import.html#cb17-12"></a><span class="co">#&gt; $ common_name                  &lt;chr&gt; &quot;Yellow-rumped Warbler&quot;, &quot;Yellow-rumped Warbler&quot;, &quot;Yellow-rumped Warbler&quot;, &quot;Yell…</span></span>
<span id="cb17-13"><a href="import.html#cb17-13"></a><span class="co">#&gt; $ scientific_name              &lt;chr&gt; &quot;Setophaga coronata&quot;, &quot;Setophaga coronata&quot;, &quot;Setophaga coronata&quot;, &quot;Setophaga cor…</span></span>
<span id="cb17-14"><a href="import.html#cb17-14"></a><span class="co">#&gt; $ subspecies_common_name       &lt;chr&gt; &quot;Yellow-rumped Warbler (Goldman&#39;s)&quot;, &quot;Yellow-rumped Warbler (Myrtle)&quot;, NA, NA, N…</span></span>
<span id="cb17-15"><a href="import.html#cb17-15"></a><span class="co">#&gt; $ subspecies_scientific_name   &lt;chr&gt; &quot;Setophaga coronata goldmani&quot;, &quot;Setophaga coronata coronata&quot;, NA, NA, NA, &quot;Setop…</span></span>
<span id="cb17-16"><a href="import.html#cb17-16"></a><span class="co">#&gt; $ observation_count            &lt;chr&gt; &quot;12&quot;, &quot;8&quot;, &quot;11&quot;, &quot;3&quot;, &quot;1&quot;, &quot;15&quot;, &quot;4&quot;, &quot;X&quot;, &quot;3&quot;, &quot;X&quot;, &quot;X&quot;, &quot;2&quot;, &quot;1&quot;, &quot;20&quot;, &quot;1&quot;, &quot;…</span></span>
<span id="cb17-17"><a href="import.html#cb17-17"></a><span class="co">#&gt; $ breeding_bird_atlas_code     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-18"><a href="import.html#cb17-18"></a><span class="co">#&gt; $ breeding_bird_atlas_category &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-19"><a href="import.html#cb17-19"></a><span class="co">#&gt; $ age_sex                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;Female, Adu…</span></span>
<span id="cb17-20"><a href="import.html#cb17-20"></a><span class="co">#&gt; $ country                      &lt;chr&gt; &quot;Guatemala&quot;, &quot;Guatemala&quot;, &quot;Guatemala&quot;, &quot;Guatemala&quot;, &quot;Guatemala&quot;, &quot;Guatemala&quot;, &quot;G…</span></span>
<span id="cb17-21"><a href="import.html#cb17-21"></a><span class="co">#&gt; $ country_code                 &lt;chr&gt; &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;GT&quot;, &quot;G…</span></span>
<span id="cb17-22"><a href="import.html#cb17-22"></a><span class="co">#&gt; $ state                        &lt;chr&gt; &quot;Huehuetenango&quot;, &quot;Petén&quot;, &quot;Huehuetenango&quot;, &quot;Jalapa&quot;, &quot;Quetzaltenango&quot;, &quot;Huehuete…</span></span>
<span id="cb17-23"><a href="import.html#cb17-23"></a><span class="co">#&gt; $ state_code                   &lt;chr&gt; &quot;GT-HU&quot;, &quot;GT-PE&quot;, &quot;GT-HU&quot;, &quot;GT-JA&quot;, &quot;GT-QZ&quot;, &quot;GT-HU&quot;, &quot;GT-PE&quot;, &quot;GT-PE&quot;, &quot;GT-PE&quot;,…</span></span>
<span id="cb17-24"><a href="import.html#cb17-24"></a><span class="co">#&gt; $ county                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-25"><a href="import.html#cb17-25"></a><span class="co">#&gt; $ county_code                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-26"><a href="import.html#cb17-26"></a><span class="co">#&gt; $ iba_code                     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-27"><a href="import.html#cb17-27"></a><span class="co">#&gt; $ bcr_code                     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-28"><a href="import.html#cb17-28"></a><span class="co">#&gt; $ usfws_code                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-29"><a href="import.html#cb17-29"></a><span class="co">#&gt; $ atlas_block                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-30"><a href="import.html#cb17-30"></a><span class="co">#&gt; $ locality                     &lt;chr&gt; &quot;Cerro de los Cuervos&quot;, &quot;Tikal Area&quot;, &quot;Capellania to La Ventosa&quot;, &quot;Cerro Alto, J…</span></span>
<span id="cb17-31"><a href="import.html#cb17-31"></a><span class="co">#&gt; $ locality_id                  &lt;chr&gt; &quot;L2713729&quot;, &quot;L4754006&quot;, &quot;L2713730&quot;, &quot;L3222877&quot;, &quot;L1380407&quot;, &quot;L2713729&quot;, &quot;L475400…</span></span>
<span id="cb17-32"><a href="import.html#cb17-32"></a><span class="co">#&gt; $ locality_type                &lt;chr&gt; &quot;P&quot;, &quot;P&quot;, &quot;P&quot;, &quot;P&quot;, &quot;H&quot;, &quot;P&quot;, &quot;P&quot;, &quot;P&quot;, &quot;P&quot;, &quot;H&quot;, &quot;P&quot;, &quot;P&quot;, &quot;H&quot;, &quot;P&quot;, &quot;H&quot;, &quot;H&quot;, …</span></span>
<span id="cb17-33"><a href="import.html#cb17-33"></a><span class="co">#&gt; $ latitude                     &lt;dbl&gt; 15.5, 17.2, 15.5, 14.7, 14.7, 15.5, 17.2, 17.2, 17.2, 15.2, 17.2, 17.2, 17.2, 14…</span></span>
<span id="cb17-34"><a href="import.html#cb17-34"></a><span class="co">#&gt; $ longitude                    &lt;dbl&gt; -91.5, -89.6, -91.5, -90.0, -91.5, -91.5, -89.6, -89.6, -90.3, -90.2, -89.6, -89…</span></span>
<span id="cb17-35"><a href="import.html#cb17-35"></a><span class="co">#&gt; $ observation_date             &lt;date&gt; 2014-03-07, 2014-01-19, 2014-03-05, 2014-01-26, 2014-12-24, 2014-03-05, 2014-01…</span></span>
<span id="cb17-36"><a href="import.html#cb17-36"></a><span class="co">#&gt; $ time_observations_started    &lt;chr&gt; &quot;07:10:00&quot;, &quot;14:00:00&quot;, &quot;10:55:00&quot;, &quot;06:30:00&quot;, &quot;09:00:00&quot;, &quot;06:15:00&quot;, &quot;14:00:0…</span></span>
<span id="cb17-37"><a href="import.html#cb17-37"></a><span class="co">#&gt; $ observer_id                  &lt;chr&gt; &quot;obsr200421&quot;, &quot;obsr837809&quot;, &quot;obsr200421&quot;, &quot;obsr411126&quot;, &quot;obsr553524&quot;, &quot;obsr32598…</span></span>
<span id="cb17-38"><a href="import.html#cb17-38"></a><span class="co">#&gt; $ sampling_event_identifier    &lt;chr&gt; &quot;S17445204&quot;, &quot;S36593691&quot;, &quot;S17445203&quot;, &quot;S20932409&quot;, &quot;S21010046&quot;, &quot;S17445397&quot;, &quot;S…</span></span>
<span id="cb17-39"><a href="import.html#cb17-39"></a><span class="co">#&gt; $ protocol_type                &lt;chr&gt; &quot;Traveling&quot;, &quot;Traveling&quot;, &quot;Traveling&quot;, &quot;Traveling&quot;, &quot;Traveling&quot;, &quot;Traveling&quot;, &quot;T…</span></span>
<span id="cb17-40"><a href="import.html#cb17-40"></a><span class="co">#&gt; $ protocol_code                &lt;chr&gt; &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P22&quot;, &quot;P2…</span></span>
<span id="cb17-41"><a href="import.html#cb17-41"></a><span class="co">#&gt; $ project_code                 &lt;chr&gt; &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;, &quot;EBIRD&quot;,…</span></span>
<span id="cb17-42"><a href="import.html#cb17-42"></a><span class="co">#&gt; $ duration_minutes             &lt;int&gt; 170, 210, 55, 300, 120, 210, 180, 240, 60, 300, 240, 180, 60, 60, 60, 210, 120, …</span></span>
<span id="cb17-43"><a href="import.html#cb17-43"></a><span class="co">#&gt; $ effort_distance_km           &lt;dbl&gt; 2.01, 1.61, 4.83, 5.00, 2.41, 2.01, 1.61, 3.22, 0.50, 3.22, 3.22, 0.25, 2.00, NA…</span></span>
<span id="cb17-44"><a href="import.html#cb17-44"></a><span class="co">#&gt; $ effort_area_ha               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-45"><a href="import.html#cb17-45"></a><span class="co">#&gt; $ number_observers             &lt;int&gt; 2, 3, 3, 6, 1, 3, 3, 14, 4, 12, 14, 1, 2, 3, 6, 2, 3, 2, 2, 2, 2, 3, 3, 3, 4, 2,…</span></span>
<span id="cb17-46"><a href="import.html#cb17-46"></a><span class="co">#&gt; $ all_species_reported         &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TR…</span></span>
<span id="cb17-47"><a href="import.html#cb17-47"></a><span class="co">#&gt; $ group_identifier             &lt;chr&gt; &quot;G828557&quot;, &quot;G2390002&quot;, &quot;G828560&quot;, NA, &quot;G1125157&quot;, &quot;G828561&quot;, &quot;G2390003&quot;, NA, NA,…</span></span>
<span id="cb17-48"><a href="import.html#cb17-48"></a><span class="co">#&gt; $ has_media                    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALS…</span></span>
<span id="cb17-49"><a href="import.html#cb17-49"></a><span class="co">#&gt; $ approved                     &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TR…</span></span>
<span id="cb17-50"><a href="import.html#cb17-50"></a><span class="co">#&gt; $ reviewed                     &lt;lgl&gt; TRUE, FALSE, TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,…</span></span>
<span id="cb17-51"><a href="import.html#cb17-51"></a><span class="co">#&gt; $ reason                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span id="cb17-52"><a href="import.html#cb17-52"></a><span class="co">#&gt; $ trip_comments                &lt;chr&gt; NA, NA, &quot;Driving w/ stops&quot;, NA, &quot;Walked up the trail from the hot springs to rid…</span></span>
<span id="cb17-53"><a href="import.html#cb17-53"></a><span class="co">#&gt; $ species_comments             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;subespecie Audubon. Todos l…</span></span></code></pre></div>
<p>We’ll cover the use of <code>unique = FALSE</code> and <code>rollup = FALSE</code> next. For now, let’s just look at the data.</p>
<div class="exercise">
<h2>
Exercise
</h2>
<p>Take a minute to explore these data using <code>glimpse()</code> and <code>View()</code>. Familiarize yourself with the columns. Be sure you can find the effort columns and the <code>observation_count</code> column.</p>
</div>
<div class="checkpoint">
<h2>
Checkpoint
</h2>
<p>Do you have the data in a data frame? Does anyone have any questions about the data so far?</p>
</div>
<div id="import-group" class="section level2">
<h2><span class="header-section-number">5.1</span> Group checklists</h2>
<p>eBird allows users to share checklists with other eBird users that they’re birding with. This results it multiple copies of some checklists in the database. Group checklists can be identified in the data because they have the <code>group_identifier</code> column populated. Let’s take a look at some these checklists.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="import.html#cb18-1"></a>ebd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-2"><a href="import.html#cb18-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(group_identifier)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-3"><a href="import.html#cb18-3"></a><span class="st">  </span><span class="kw">arrange</span>(group_identifier) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-4"><a href="import.html#cb18-4"></a><span class="st">  </span><span class="kw">select</span>(sampling_event_identifier, group_identifier) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-5"><a href="import.html#cb18-5"></a><span class="st">  </span><span class="kw">head</span>()</span>
<span id="cb18-6"><a href="import.html#cb18-6"></a><span class="co">#&gt; # A tibble: 6 x 2</span></span>
<span id="cb18-7"><a href="import.html#cb18-7"></a><span class="co">#&gt;   sampling_event_identifier group_identifier</span></span>
<span id="cb18-8"><a href="import.html#cb18-8"></a><span class="co">#&gt;   &lt;chr&gt;                     &lt;chr&gt;           </span></span>
<span id="cb18-9"><a href="import.html#cb18-9"></a><span class="co">#&gt; 1 S20741847                 G1059449        </span></span>
<span id="cb18-10"><a href="import.html#cb18-10"></a><span class="co">#&gt; 2 S20713245                 G1059449        </span></span>
<span id="cb18-11"><a href="import.html#cb18-11"></a><span class="co">#&gt; 3 S20713307                 G1059450        </span></span>
<span id="cb18-12"><a href="import.html#cb18-12"></a><span class="co">#&gt; 4 S20741848                 G1059450        </span></span>
<span id="cb18-13"><a href="import.html#cb18-13"></a><span class="co">#&gt; 5 S20925877                 G1072982        </span></span>
<span id="cb18-14"><a href="import.html#cb18-14"></a><span class="co">#&gt; 6 S20929011                 G1072982</span></span></code></pre></div>
<p>We see that there are multiple checklists with the same <code>group_identifier</code>, implying that these checklists have been shared and are duplicates. Let’s look at one of these on the eBird website: <a href="https://ebird.org/view/checklist/S20741847" class="uri">https://ebird.org/view/checklist/S20741847</a></p>
<p>As it turns out, group checklists aren’t exact duplicates; once a checklist has been shared the individual checklists can diverge in terms of the species seen, the counts for each species, and even the protocol and effort. For an example, look at <a href="https://ebird.org/checklist/S17908640">this checklist</a> with six observers each of whom saw a different set of species.</p>
<p>In most cases, you’ll only want to retain one of these checklists, but it’s not trivial to do so because the checklists are only partial duplicates. The function <code>auk_unique()</code> manages this for you. Specifically, for each species, it retains only the first observation of that species, which is typically the one submitted by the primary observer (i.e. the person who submit the checklist to eBird). Note that the resulting “checklist” will be a combination of all the species seen across all copies of the group checklist.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="import.html#cb19-1"></a>keep_one &lt;-<span class="st"> </span><span class="kw">auk_unique</span>(ebd)</span>
<span id="cb19-2"><a href="import.html#cb19-2"></a><span class="kw">nrow</span>(ebd)</span>
<span id="cb19-3"><a href="import.html#cb19-3"></a><span class="co">#&gt; [1] 160</span></span>
<span id="cb19-4"><a href="import.html#cb19-4"></a><span class="kw">nrow</span>(keep_one)</span>
<span id="cb19-5"><a href="import.html#cb19-5"></a><span class="co">#&gt; [1] 104</span></span></code></pre></div>
<p>When <code>auk_unique()</code> is run, a new field is created (<code>checklist_id</code>), which is populated with <code>group_identifier</code> for group checklists and <code>sampling_event_identifier</code> otherwise; this is now a unique identifier for checklists. In addition, the full set of observer and sampling event identifiers has been retained in a comma separated format.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="import.html#cb20-1"></a>keep_one <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-2"><a href="import.html#cb20-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(group_identifier)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-3"><a href="import.html#cb20-3"></a><span class="st">  </span><span class="kw">select</span>(checklist_id, sampling_event_identifier, </span>
<span id="cb20-4"><a href="import.html#cb20-4"></a>         group_identifier, observer_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-5"><a href="import.html#cb20-5"></a><span class="st">  </span><span class="kw">head</span>()</span>
<span id="cb20-6"><a href="import.html#cb20-6"></a><span class="co">#&gt; # A tibble: 6 x 4</span></span>
<span id="cb20-7"><a href="import.html#cb20-7"></a><span class="co">#&gt;   checklist_id sampling_event_identifier               group_identifier observer_id                                </span></span>
<span id="cb20-8"><a href="import.html#cb20-8"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;                                   &lt;chr&gt;            &lt;chr&gt;                                      </span></span>
<span id="cb20-9"><a href="import.html#cb20-9"></a><span class="co">#&gt; 1 G828558      S17445097,S17445389                     G828558          obsr200421,obsr325989                      </span></span>
<span id="cb20-10"><a href="import.html#cb20-10"></a><span class="co">#&gt; 2 G828561      S17445202,S17445397                     G828561          obsr200421,obsr325989                      </span></span>
<span id="cb20-11"><a href="import.html#cb20-11"></a><span class="co">#&gt; 3 G828560      S17445203,S17445396                     G828560          obsr200421,obsr325989                      </span></span>
<span id="cb20-12"><a href="import.html#cb20-12"></a><span class="co">#&gt; 4 G828557      S17445204,S17445204,S17445386,S17445386 G828557          obsr200421,obsr200421,obsr325989,obsr325989</span></span>
<span id="cb20-13"><a href="import.html#cb20-13"></a><span class="co">#&gt; 5 G828555      S17445206,S17445382                     G828555          obsr200421,obsr325989                      </span></span>
<span id="cb20-14"><a href="import.html#cb20-14"></a><span class="co">#&gt; 6 G828571      S17445344,S17445420                     G828571          obsr200421,obsr325989</span></span></code></pre></div>
<p>By default, whenever you import data with <code>read_ebd()</code> it calls <code>auk_unique()</code> automatically; however, this behavior can be controlled with the <code>unique</code> argument. So, for example, the following will import data <em>and</em> remove duplicates.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="import.html#cb21-1"></a>ebd &lt;-<span class="st"> </span><span class="kw">read_ebd</span>(<span class="st">&quot;data/ebd_yerwar.txt&quot;</span>, <span class="dt">rollup =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="tip">
<h2>
Tip
</h2>
<p><code>auk_unique()</code> takes a long time to run on large datasets. Consider using <code>read_ebd(unique = FALSE)</code> when importing large text files to speed up the process.</p>
</div>
</div>
<div id="import-taxonomy" class="section level2">
<h2><span class="header-section-number">5.2</span> Taxonomy</h2>
<p>eBird users can enter data for a wide range of taxa in addition to species. Observations can be reported at a level more granular than species (e.g. subspecies or recognizable forms) or at a higher level than species (e.g. spuhs, slashes, and hybrids). All the different taxa that can be reported are contained in the eBird taxonomy, which is updated every year in August. The eBird Science page has a <a href="https://ebird.org/science/the-ebird-taxonomy">subsection with details on the eBird taxonomy</a>, and the taxonomy itself is available as a data frame in the <code>auk</code> package.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="import.html#cb22-1"></a><span class="kw">glimpse</span>(ebird_taxonomy)</span>
<span id="cb22-2"><a href="import.html#cb22-2"></a><span class="co">#&gt; Observations: 16,513</span></span>
<span id="cb22-3"><a href="import.html#cb22-3"></a><span class="co">#&gt; Variables: 8</span></span>
<span id="cb22-4"><a href="import.html#cb22-4"></a><span class="co">#&gt; $ scientific_name &lt;chr&gt; &quot;Struthio camelus&quot;, &quot;Struthio molybdophanes&quot;, &quot;Struthio camelus/molybdophanes&quot;, &quot;Rhea america…</span></span>
<span id="cb22-5"><a href="import.html#cb22-5"></a><span class="co">#&gt; $ common_name     &lt;chr&gt; &quot;Common Ostrich&quot;, &quot;Somali Ostrich&quot;, &quot;Common/Somali Ostrich&quot;, &quot;Greater Rhea&quot;, &quot;Lesser Rhea&quot;, &quot;…</span></span>
<span id="cb22-6"><a href="import.html#cb22-6"></a><span class="co">#&gt; $ species_code    &lt;chr&gt; &quot;ostric2&quot;, &quot;ostric3&quot;, &quot;y00934&quot;, &quot;grerhe1&quot;, &quot;lesrhe2&quot;, &quot;lesrhe4&quot;, &quot;lesrhe3&quot;, &quot;tabtin1&quot;, &quot;higti…</span></span>
<span id="cb22-7"><a href="import.html#cb22-7"></a><span class="co">#&gt; $ category        &lt;chr&gt; &quot;species&quot;, &quot;species&quot;, &quot;slash&quot;, &quot;species&quot;, &quot;species&quot;, &quot;issf&quot;, &quot;issf&quot;, &quot;species&quot;, &quot;species&quot;, &quot;i…</span></span>
<span id="cb22-8"><a href="import.html#cb22-8"></a><span class="co">#&gt; $ taxon_order     &lt;dbl&gt; 1, 6, 7, 8, 14, 15, 18, 19, 20, 21, 26, 27, 30, 35, 36, 39, 52, 53, 54, 55, 56, 71, 72, 73, 7…</span></span>
<span id="cb22-9"><a href="import.html#cb22-9"></a><span class="co">#&gt; $ order           &lt;chr&gt; &quot;Struthioniformes&quot;, &quot;Struthioniformes&quot;, &quot;Struthioniformes&quot;, &quot;Rheiformes&quot;, &quot;Rheiformes&quot;, &quot;Rhei…</span></span>
<span id="cb22-10"><a href="import.html#cb22-10"></a><span class="co">#&gt; $ family          &lt;chr&gt; &quot;Struthionidae&quot;, &quot;Struthionidae&quot;, &quot;Struthionidae&quot;, &quot;Rheidae&quot;, &quot;Rheidae&quot;, &quot;Rheidae&quot;, &quot;Rheidae&quot;…</span></span>
<span id="cb22-11"><a href="import.html#cb22-11"></a><span class="co">#&gt; $ report_as       &lt;chr&gt; NA, NA, NA, NA, NA, &quot;lesrhe2&quot;, &quot;lesrhe2&quot;, NA, NA, &quot;higtin1&quot;, &quot;higtin1&quot;, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb22-12"><a href="import.html#cb22-12"></a><span class="co"># you can even report that you saw a generic bird!</span></span>
<span id="cb22-13"><a href="import.html#cb22-13"></a><span class="kw">filter</span>(ebird_taxonomy, common_name <span class="op">==</span><span class="st"> &quot;bird sp.&quot;</span>)</span>
<span id="cb22-14"><a href="import.html#cb22-14"></a><span class="co">#&gt;   scientific_name common_name species_code category taxon_order order family report_as</span></span>
<span id="cb22-15"><a href="import.html#cb22-15"></a><span class="co">#&gt; 1        Aves sp.    bird sp.        bird1     spuh       34501  &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt;</span></span></code></pre></div>
<p>For taxa below the species level, the <code>report_as</code> field specifies the species that this taxa falls under. For example, Myrtle warbler rolls up to Yellow-rumped Warbler.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="import.html#cb23-1"></a><span class="co"># myrtle warbler</span></span>
<span id="cb23-2"><a href="import.html#cb23-2"></a><span class="kw">filter</span>(ebird_taxonomy, common_name <span class="op">==</span><span class="st"> &quot;Yellow-rumped Warbler (Myrtle)&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb23-3"><a href="import.html#cb23-3"></a><span class="st">  </span><span class="kw">select</span>(common_name, category, report_as)</span>
<span id="cb23-4"><a href="import.html#cb23-4"></a><span class="co">#&gt;                      common_name category report_as</span></span>
<span id="cb23-5"><a href="import.html#cb23-5"></a><span class="co">#&gt; 1 Yellow-rumped Warbler (Myrtle)     issf    yerwar</span></span>
<span id="cb23-6"><a href="import.html#cb23-6"></a><span class="co"># rolls up to yellow-rumped warbler</span></span>
<span id="cb23-7"><a href="import.html#cb23-7"></a><span class="kw">filter</span>(ebird_taxonomy, species_code <span class="op">==</span><span class="st"> &quot;yerwar&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb23-8"><a href="import.html#cb23-8"></a><span class="st">  </span><span class="kw">select</span>(common_name, category, report_as)</span>
<span id="cb23-9"><a href="import.html#cb23-9"></a><span class="co">#&gt;             common_name category report_as</span></span>
<span id="cb23-10"><a href="import.html#cb23-10"></a><span class="co">#&gt; 1 Yellow-rumped Warbler  species      &lt;NA&gt;</span></span></code></pre></div>
<div class="exercise">
<h2>
Exercise
</h2>
<p>How many different subspecies of Barn Swallow does eBird recognize?</p>
<button class="solution">Solution</button>
<div class="solution-content">
<p>Start by finding the species code for Barn Swallow, then find records in <code>ebird_taxonomy</code> with this code in the <code>report_as</code> column.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="import.html#cb24-1"></a>ebird_taxonomy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-2"><a href="import.html#cb24-2"></a><span class="st">  </span><span class="kw">filter</span>(common_name <span class="op">==</span><span class="st"> &quot;Barn Swallow&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-3"><a href="import.html#cb24-3"></a><span class="st">  </span><span class="kw">select</span>(common_name, species_code)</span>
<span id="cb24-4"><a href="import.html#cb24-4"></a><span class="co">#&gt;    common_name species_code</span></span>
<span id="cb24-5"><a href="import.html#cb24-5"></a><span class="co">#&gt; 1 Barn Swallow       barswa</span></span>
<span id="cb24-6"><a href="import.html#cb24-6"></a>ebird_taxonomy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-7"><a href="import.html#cb24-7"></a><span class="st">  </span><span class="kw">filter</span>(report_as <span class="op">==</span><span class="st"> &quot;barswa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-8"><a href="import.html#cb24-8"></a><span class="st">  </span><span class="kw">select</span>(common_name, category, report_as)</span>
<span id="cb24-9"><a href="import.html#cb24-9"></a><span class="co">#&gt;                    common_name category report_as</span></span>
<span id="cb24-10"><a href="import.html#cb24-10"></a><span class="co">#&gt; 1 Barn Swallow (White-bellied)     issf    barswa</span></span>
<span id="cb24-11"><a href="import.html#cb24-11"></a><span class="co">#&gt; 2      Barn Swallow (Egyptian)     issf    barswa</span></span>
<span id="cb24-12"><a href="import.html#cb24-12"></a><span class="co">#&gt; 3        Barn Swallow (Levant)     issf    barswa</span></span>
<span id="cb24-13"><a href="import.html#cb24-13"></a><span class="co">#&gt; 4      Barn Swallow (Tytler&#39;s)     issf    barswa</span></span>
<span id="cb24-14"><a href="import.html#cb24-14"></a><span class="co">#&gt; 5  Barn Swallow (Buff-bellied)     issf    barswa</span></span>
<span id="cb24-15"><a href="import.html#cb24-15"></a><span class="co">#&gt; 6      Barn Swallow (American)     issf    barswa</span></span></code></pre></div>
<p>eBird recognizes six subspecies.</p>
</div>
</div>
<p>The EBD contains a subspecies column, which is populated when an observer has identified a bird below species level. In the EBD extract we’re working with, we have three different subspecies of Yellow-rumped Warbler:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="import.html#cb25-1"></a><span class="kw">count</span>(ebd, common_name, subspecies_common_name)</span>
<span id="cb25-2"><a href="import.html#cb25-2"></a><span class="co">#&gt; # A tibble: 4 x 3</span></span>
<span id="cb25-3"><a href="import.html#cb25-3"></a><span class="co">#&gt;   common_name           subspecies_common_name                n</span></span>
<span id="cb25-4"><a href="import.html#cb25-4"></a><span class="co">#&gt;   &lt;chr&gt;                 &lt;chr&gt;                             &lt;int&gt;</span></span>
<span id="cb25-5"><a href="import.html#cb25-5"></a><span class="co">#&gt; 1 Yellow-rumped Warbler Yellow-rumped Warbler (Audubon&#39;s)    27</span></span>
<span id="cb25-6"><a href="import.html#cb25-6"></a><span class="co">#&gt; 2 Yellow-rumped Warbler Yellow-rumped Warbler (Goldman&#39;s)     4</span></span>
<span id="cb25-7"><a href="import.html#cb25-7"></a><span class="co">#&gt; 3 Yellow-rumped Warbler Yellow-rumped Warbler (Myrtle)       16</span></span>
<span id="cb25-8"><a href="import.html#cb25-8"></a><span class="co">#&gt; 4 Yellow-rumped Warbler &lt;NA&gt;                                 57</span></span></code></pre></div>
<p>It’s even possible to have multiple subspecies of the same species on a single checklist.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="import.html#cb26-1"></a><span class="kw">filter</span>(ebd, checklist_id <span class="op">==</span><span class="st"> &quot;S22725024&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-2"><a href="import.html#cb26-2"></a><span class="st">  </span><span class="kw">select</span>(checklist_id, common_name, subspecies_common_name, observation_count)</span>
<span id="cb26-3"><a href="import.html#cb26-3"></a><span class="co">#&gt; # A tibble: 2 x 4</span></span>
<span id="cb26-4"><a href="import.html#cb26-4"></a><span class="co">#&gt;   checklist_id common_name           subspecies_common_name            observation_count</span></span>
<span id="cb26-5"><a href="import.html#cb26-5"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;                 &lt;chr&gt;                             &lt;chr&gt;            </span></span>
<span id="cb26-6"><a href="import.html#cb26-6"></a><span class="co">#&gt; 1 S22725024    Yellow-rumped Warbler Yellow-rumped Warbler (Audubon&#39;s) 1                </span></span>
<span id="cb26-7"><a href="import.html#cb26-7"></a><span class="co">#&gt; 2 S22725024    Yellow-rumped Warbler Yellow-rumped Warbler (Myrtle)    1</span></span></code></pre></div>
<p>For most uses, you’ll want eBird data at the species level, which means dropping higher level taxa and rolling lower level taxa up to species level, making sure to sum the counts if multiple subspecies were present. The function <code>auk_rollup()</code> handles these taxonomic matters for you.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="import.html#cb27-1"></a>no_subsp &lt;-<span class="st"> </span><span class="kw">auk_rollup</span>(ebd)</span>
<span id="cb27-2"><a href="import.html#cb27-2"></a>no_subsp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb27-3"><a href="import.html#cb27-3"></a><span class="st">  </span><span class="kw">filter</span>(checklist_id <span class="op">==</span><span class="st"> &quot;S22725024&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb27-4"><a href="import.html#cb27-4"></a><span class="st">  </span><span class="kw">select</span>(checklist_id, common_name, observation_count)</span>
<span id="cb27-5"><a href="import.html#cb27-5"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb27-6"><a href="import.html#cb27-6"></a><span class="co">#&gt;   checklist_id common_name           observation_count</span></span>
<span id="cb27-7"><a href="import.html#cb27-7"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;                 &lt;chr&gt;            </span></span>
<span id="cb27-8"><a href="import.html#cb27-8"></a><span class="co">#&gt; 1 S22725024    Yellow-rumped Warbler 2</span></span></code></pre></div>
<p>By default, when you import data with <code>read_ebd()</code> it calls <code>auk_rollup()</code> automatically; however, this behavior can be controlled with the <code>rollup</code> argument. So, for example, the following will import data <em>and</em> remove duplicates <em>and</em> report all records at species level.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="import.html#cb28-1"></a>ebd &lt;-<span class="st"> </span><span class="kw">read_ebd</span>(<span class="st">&quot;data/ebd_yerwar.txt&quot;</span>)</span></code></pre></div>
<div class="checkpoint">
<h2>
Checkpoint
</h2>
<p>Any questions on data import, taxonomy, or group checklists?</p>
</div>

</div>
</div>
<script>
var coll = document.getElementsByClassName("solution");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.display === "block") {
      content.style.display = "none";
    } else {
      content.style.display = "block";
    }
  });
}
</script>
            </section>

          </div>
        </div>
      </div>
<a href="filter.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="presabs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mstrimas/ebp-workshop/edit/master/05_import.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
